/**
 * Практическая работа
 * Тема: Методы массивов в JavaScript
 *
 * ВАЖНО:
 * - Используйте ТОЛЬКО методы массивов
 * - Циклы for / while использовать нельзя
 * - Каждый TODO должен быть реализован
 * - Результаты выводить в консоль
 */

// Исходные данные
const prices = [1200, 3400, 560, 999, 2500, 4100, 800, 1500];
const categories = ["телефон", "ноутбук", "наушники", "телефон", "планшет", "ноутбук", "наушники"];
const discounts = [10, 0, 15, 5, 20, 0, 10];

// =====================================================
// 1. Перебор массива (forEach)
// =====================================================
// TODO: Выведите все цены в формате:
// "Цена товара: 1200 ₽"
console.log("1. Перебор массива:");
prices.forEach(price => {
    console.log(`Цена товара: ${price} ₽`);
});

// =====================================================
// 2. Преобразование массива (map)
// =====================================================
// TODO: Создайте новый массив pricesWithDiscount,
// где к каждой цене применена скидка из массива discounts
// Формула: цена - (цена * скидка / 100)
const pricesWithDiscount = prices.map((price, index) => {
    const discount = discounts[index] || 0;
    return price - (price * discount / 100);
});

console.log("\n2. Цены со скидкой:", pricesWithDiscount);

// =====================================================
// 3. Фильтрация массива (filter)
// =====================================================
// TODO: Получите массив цен дороже 2000
const expensivePrices = prices.filter(price => {
    return price > 2000;
});

console.log("\n3. Дорогие товары:", expensivePrices);

// =====================================================
// 4. Поиск элемента (find)
// =====================================================
// TODO: Найдите первую цену больше 4000
const firstVeryExpensive = prices.find(price => {
    return price > 4000;
});

console.log("\n4. Первая цена больше 4000:", firstVeryExpensive);

// =====================================================
// 5. Проверка условий (some, every)
// =====================================================
// TODO: Проверьте, есть ли товары дешевле 1000
const hasCheapProducts = prices.some(price => {
    return price < 1000;
});

// TODO: Проверьте, что все цены больше 0
const allPricesPositive = prices.every(price => {
    return price > 0;
});

console.log("\n5. Есть ли дешёвые товары:", hasCheapProducts);
console.log("   Все ли цены положительные:", allPricesPositive);

// =====================================================
// 6. Сортировка массива (sort)
// =====================================================
// TODO: Отсортируйте цены по возрастанию
// ВАЖНО: исходный массив prices изменять нельзя
const sortedPrices = [...prices].sort((a, b) => {
    return a - b;
});

console.log("\n6. Отсортированные цены:", sortedPrices);

// =====================================================
// 7. Работа с несколькими массивами (reduce)
// =====================================================
// TODO: Посчитайте общую стоимость всех товаров
const totalPrice = prices.reduce((sum, price) => {
    return sum + price;
}, 0);

console.log("\n7. Общая стоимость:", totalPrice);

// =====================================================
// 8. Работа со строками в массиве
// =====================================================
// TODO: Создайте массив уникальных категорий товаров
// Подсказка: includes()
const uniqueCategories = categories.reduce((result, category) => {
    if (!result.includes(category)) {
        result.push(category);
    }
    return result;
}, []);

console.log("\n8. Уникальные категории:", uniqueCategories);

// =====================================================
// 9. Дополнительное задание
// =====================================================
// TODO: Удалите последний элемент массива prices
// TODO: Добавьте новую цену 1800 в конец массива
// Создаем копию массива, чтобы не изменять исходный для предыдущих заданий
const modifiedPrices = [...prices];
modifiedPrices.pop();
modifiedPrices.push(1800);

console.log("\n9. Модифицированный массив цен:", modifiedPrices);

// TODO: Создайте копию массива categories
const categoriesCopy = [...categories];

console.log("   Копия категорий:", categoriesCopy);